# üß† DevSecOps Lab ‚Äî –ü–æ–ª–Ω–∞—è –ü—Ä–∞–∫—Ç–∏–∫–∞ (–û–¥–Ω–∞ –í–ú, Namespace, DHCP, NAT, Backup)

### –í–µ—Ä—Å–∏—è: Ubuntu 25.10 (Desktop / VMware NAT)
**–ê–≤—Ç–æ—Ä:** 159NoScam 
**–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–≤–∏—Ç–∏—è:** DevSecOps / –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** –û–∫—Ç—è–±—Ä—å 2025  

---

## üöÄ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç ‚Äî –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è **DevSecOps-–ø—Ä–∞–∫—Ç–∏–∫–∏**, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è **–≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã** (Ubuntu 25.10).  
–í –Ω–µ–π —Å–∏–º—É–ª–∏—Ä—É–µ—Ç—Å—è –º–∏–Ω–∏-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –≤–∫–ª—é—á–∞—é—â–∞—è:

- –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ (`namespace`),
- DHCP-—Å–µ—Ä–≤–µ—Ä –∏ NAT-–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é,
- —Å–∏—Å—Ç–µ–º–Ω—ã–π firewall –Ω–∞ `iptables`,
- –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ SSH-–∫–ª—é—á–∞–º,
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `rsync` –∏ `cron`,
- –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤ —á–µ—Ä–µ–∑ `tar`.

–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî –æ—Ç—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –Ω–∞–≤—ã–∫–∏ **DevOps + Security**, –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ.

---

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ       –û—Å–Ω–æ–≤–Ω–∞—è –í–ú         ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ Namespace: vm2        ‚îÇ ‚îÇ
‚îÇ ‚îÇ  - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å veth1    ‚îÇ ‚îÇ
‚îÇ ‚îÇ  - DHCP IP            ‚îÇ ‚îÇ
‚îÇ ‚îÇ  - SSH ‚Üí –û—Å–Ω–æ–≤–Ω–∞—è –í–ú  ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                           ‚îÇ
‚îÇ veth0 <--> veth1 (—Å–≤—è–∑–∫–∞) ‚îÇ
‚îÇ DHCP + NAT + Firewall     ‚îÇ
‚îÇ NGINX + Backups (/backups)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–û—Å–Ω–æ–≤–Ω–∞—è –í–ú** ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–æ–ª—å —Ö–æ—Å—Ç–∞ (DHCP, NAT, Firewall, Nginx, —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –±—ç–∫–∞–ø–æ–≤).  
**Namespace vm2** ‚Äî —ç–º—É–ª–∏—Ä—É–µ—Ç –≤—Ç–æ—Ä—É—é –í–ú (—Å–∏—Å—Ç–µ–º–∞-–∫–ª–∏–µ–Ω—Ç, –∫–æ—Ç–æ—Ä–∞—è –¥–µ–ª–∞–µ—Ç –±—ç–∫–∞–ø—ã –∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ SSH).

---

## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### üîπ –°–µ—Ç—å –∏ DHCP
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ `veth0` –∏ `veth1` –¥–ª—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º –∏ namespace.  
- DHCP-—Å–µ—Ä–≤–µ—Ä (`isc-dhcp-server`) —Ä–∞–∑–¥–∞—ë—Ç IP-–∞–¥—Ä–µ—Å–∞ –≤ –ø–æ–¥—Å–µ—Ç–∏ `192.168.50.0/24`.  
- NAT —á–µ—Ä–µ–∑ `iptables` –ø–æ–∑–≤–æ–ª—è–µ—Ç namespace –≤—ã—Ö–æ–¥–∏—Ç—å –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Å–Ω–æ–≤–Ω–æ–π –í–ú.  

### üîπ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ Firewall
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ `iptables` (–±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `ufw`).  
- –ü–æ–ª–∏—Ç–∏–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî `INPUT DROP`, —Ä–∞–∑—Ä–µ—à–µ–Ω–æ —Ç–æ–ª—å–∫–æ:
  - –õ–æ–∫–∞–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ (`lo`),
  - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (`ESTABLISHED, RELATED`),
  - –ü–æ—Ä—Ç—ã `22` (SSH) –∏ `80` (HTTP).  
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `netfilter-persistent`.  

### üîπ SSH-–¥–æ—Å—Ç—É–ø
- –í `vm2` —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø–∞—Ä–∞ SSH-–∫–ª—é—á–µ–π (`ed25519`).  
- –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é –í–ú.  
- –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ `vm2` –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ `192.168.50.1` –±–µ–∑ –ø–∞—Ä–æ–ª—è.  
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –±—ç–∫–∞–ø–µ.  

### üîπ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ (rsync)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `rsync` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ `/etc/` –∏–∑ `vm2` –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é –í–ú.  
- –ü–µ—Ä–µ–¥–∞—á–∞ –∏–¥—ë—Ç –ø–æ SSH, –∏—Å–ø–æ–ª—å–∑—É—è —Ä–∞–Ω–µ–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á.  
- –ö–∞—Ç–∞–ª–æ–≥ –¥–ª—è –±—ç–∫–∞–ø–æ–≤: `/backups/etc`.  
- –†–∞–±–æ—Ç–∞–µ—Ç –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω–æ ‚Äî –∫–æ–ø–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —á—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç –≤—Ä–µ–º—è –∏ —Ç—Ä–∞—Ñ–∏–∫.  

### üîπ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ cron
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è cron-–∑–∞–¥–∞—á–∞, –∫–æ—Ç–æ—Ä–∞—è **–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 2:00 –Ω–æ—á–∏** –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ.  
- –õ–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–∏—à—É—Ç—Å—è –≤ `/var/log/backup-rsync.log`.  
- –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∞–º–∏ `root` —á–µ—Ä–µ–∑ `sudo crontab -e`.  

### üîπ –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤ (tar)
- –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –∞—Ä—Ö–∏–≤–∏—Ä—É—é—Ç—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏ –∏–∑ `/var/log` –≤ –∫–∞—Ç–∞–ª–æ–≥ `/backups/logs/`.  
- –ê—Ä—Ö–∏–≤—ã –∏–º–µ–Ω—É—é—Ç—Å—è –ø–æ –¥–∞—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä:
  ```
  /backups/logs/logs_2025-10-20.tar.gz
  ```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤

```
/backups/
‚îú‚îÄ‚îÄ etc/              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –±—ç–∫–∞–ø—ã
‚îú‚îÄ‚îÄ logs/             # –ê—Ä—Ö–∏–≤—ã –ª–æ–≥–æ–≤ (tar.gz)
‚îî‚îÄ‚îÄ backup-rsync.log  # –õ–æ–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è rsync
```

---

## üîë –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ IP –≤–Ω—É—Ç—Ä–∏ namespace
sudo ip netns exec vm2 ip a

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
sudo ip netns exec vm2 ping -c 3 8.8.8.8

# –ü—Ä–æ–≤–µ—Ä–∫–∞ nginx –∏ ssh –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –í–ú
sudo ss -tulpn | grep -E '22|80'

# –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
sudo ip netns exec vm2 rsync -azhAX -e "ssh -i /home/ubuntu/.ssh/id_ed25519" /etc/ ubuntu@192.168.50.1:/backups/etc/

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ cron-–∑–∞–¥–∞—á–∏
sudo tail -n 50 /var/log/backup-rsync.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ö–∏–≤–æ–≤
ls -lh /backups/etc/
ls -lh /backups/logs/
```

---

## üß∞ –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|-------------|------------|
| –°–µ—Ç—å | `ip`, `ip netns`, `isc-dhcp-server` | –°–æ–∑–¥–∞–Ω–∏–µ namespace –∏ DHCP |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | `iptables`, `netfilter-persistent` | NAT, Firewall |
| –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ | `rsync`, `ssh` | –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ –∫–ª—é—á—É |
| –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è | `cron` | –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞–Ω–∏–π |
| –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ | `tar`, `gzip` | –ê—Ä—Ö–∏–≤–∞—Ü–∏—è –ª–æ–≥–æ–≤ |
| –í–µ–±-—Å–µ—Ä–≤–∏—Å | `nginx` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ |
| –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ | `ss`, `ping` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ |

---

## üß† –§–∏–ª–æ—Å–æ—Ñ–∏—è DevSecOps

> ‚Äú–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞, –∞ –∫—É–ª—å—Ç—É—Ä–∞.  
> –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è ‚Äî –Ω–µ —Ü–µ–ª—å, –∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏.‚Äù

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç —É—á–∏—Ç –º—ã—Å–ª–∏—Ç—å –∫–∞–∫ **DevSecOps-–∏–Ω–∂–µ–Ω–µ—Ä**:

- –≤—Å—ë –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å **–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ**,  
- –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –∏ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã,  
- –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ –∫–ª—é—á–∞–º,  
- –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞—É–¥–∏—Ç –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è,  
- –Ω–∞–¥—ë–∂–Ω—ã–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –∏ –∏—Ö –∫–æ–Ω—Ç—Ä–æ–ª—å.  

---

## üå± –ü—É—Ç–∏ —Ä–∞–∑–≤–∏—Ç–∏—è (Roadmap)

–ï—Å–ª–∏ —Ç—ã –æ—Å–≤–æ–∏–ª —ç—Ç—É –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—é ‚Äî –≤–æ—Ç —Ç–≤–æ–∏ **—Å–ª–µ–¥—É—é—â–∏–µ —É—Ä–æ–≤–Ω–∏ —Ä–æ—Å—Ç–∞**:

### üß© –£—Ä–æ–≤–µ–Ω—å 2 ‚Äî –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å
- –£—Å—Ç–∞–Ω–æ–≤–∏ **Prometheus + Node Exporter** –¥–ª—è –º–µ—Ç—Ä–∏–∫.  
- –î–æ–±–∞–≤—å **Grafana Loki** –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–±–æ—Ä–∞ –ª–æ–≥–æ–≤.  

### üîê –£—Ä–æ–≤–µ–Ω—å 3 ‚Äî –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ù–∞—Å—Ç—Ä–æ–π **Fail2Ban**, **AppArmor** –∏–ª–∏ **SELinux**.  
- –î–æ–±–∞–≤—å `auditd` –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ.  

### üß¨ –£—Ä–æ–≤–µ–Ω—å 4 ‚Äî –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ IaC
- –ü–µ—Ä–µ–ø–∏—à–∏ —Å—Ü–µ–Ω–∞—Ä–∏–π –Ω–∞ **Ansible**.  
- –ò—Å–ø–æ–ª—å–∑—É–π **Terraform** —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏.  
- –í—ã–Ω–µ—Å–∏ vm2 –≤ **Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**.  

### ‚òÅÔ∏è –£—Ä–æ–≤–µ–Ω—å 5 ‚Äî –û–±–ª–∞–∫–æ –∏ CI/CD
- –†–∞–∑–≤–µ—Ä–Ω–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—É—é —Å—Ä–µ–¥—É –≤ **AWS / Azure / GCP**.  
- –ù–∞—Å—Ç—Ä–æ–π CI/CD —Å **GitHub Actions**.  
- –°–æ—Ö—Ä–∞–Ω—è–π –±—ç–∫–∞–ø—ã –≤ **S3 / MinIO**.  

---

## üßæ –õ–∏—Ü–µ–Ω–∑–∏—è

**MIT License** ‚Äî —Å–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π, –∏–∑—É—á–∞–π –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π –ø—Ä–æ–µ–∫—Ç –ø–æ–¥ —Å–≤–æ–∏ –∑–∞–¥–∞—á–∏.  

---

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

–°–æ–∑–¥–∞–Ω–æ –∏–Ω–∂–µ–Ω–µ—Ä–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—á–µ—Ç–∞–µ—Ç **DevOps-–ø—Ä–∞–∫—Ç–∏–∫–∏** –∏ **–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º** (DevSecOps mindset).  
–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ö–æ—á–µ—Ç:

- –ø–æ–Ω–∏–º–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å–µ—Ç–µ–π –∏ Linux-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã,  
- –≤–Ω–µ–¥—Ä—è—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é,  
- –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã —Å –Ω—É–ª—è.  

> ‚Äú–ï—Å–ª–∏ —Ç—ã –º–æ–∂–µ—à—å –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –Ω–∞ –æ–¥–Ω–æ–π –í–ú ‚Äî  
> —Ç—ã —Å–º–æ–∂–µ—à—å —É–ø—Ä–∞–≤–ª—è—Ç—å –µ—é –≤ –ª—é–±–æ–π –æ–±–ª–∞—á–Ω–æ–π —Å—Ä–µ–¥–µ.‚Äù

---

## üí¨ –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –≤–∫–ª–∞–¥

Pull Request‚Äô—ã, –∏–¥–µ–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è!  
–ë—É–¥–µ—Ç –æ—Å–æ–±–µ–Ω–Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
- —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ firewall-–ø—Ä–∞–≤–∏–ª–∞,  
- –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é —Å systemd timers,  
- –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤.

---

########################################################################
#  DEVSECOPS LAB ‚Äî FULL PRACTICE (ONE VM, NAMESPACE, DHCP, NAT, BACKUP)
#  Ubuntu 25.10 Desktop / VMware NAT / user: ubuntu
########################################################################

############################
# PART 0 ‚Äî Namespace VM2
############################

sudo ip netns add vm2
sudo ip link add veth0 type veth peer name veth1
sudo ip link set veth1 netns vm2

sudo ip addr add 192.168.50.1/24 dev veth0
sudo ip link set veth0 up

sudo ip netns exec vm2 ip link set lo up
sudo ip netns exec vm2 ip link set veth1 up

############################
# PART 1 ‚Äî DHCP SERVER
############################

sudo apt update
sudo apt install -y isc-dhcp-server

sudo tee /etc/dhcp/dhcpd.conf <<EOF
default-lease-time 3600;
max-lease-time 7200;
authoritative;

subnet 192.168.50.0 netmask 255.255.255.0 {
    range 192.168.50.100 192.168.50.200;
    option routers 192.168.50.1;
    option domain-name-servers 8.8.8.8, 1.1.1.1;
}
EOF

sudo sed -i 's|INTERFACESv4=""|INTERFACESv4="veth0"|' /etc/default/isc-dhcp-server
sudo systemctl restart isc-dhcp-server
sudo systemctl enable isc-dhcp-server

sudo ip netns exec vm2 dhclient veth1
sudo ip netns exec vm2 ip a

############################
# PART 2 ‚Äî NAT + INTERNET
############################

sudo sysctl -w net.ipv4.ip_forward=1

sudo apt install -y iptables iptables-persistent

sudo iptables -t nat -A POSTROUTING -s 192.168.50.0/24 -o end33 -j MASQUERADE
sudo iptables -A FORWARD -i end33 -o veth0 -m state --state RELATED,ESTABLISHED -j ACCEPT
sudo iptables -A FORWARD -i veth0 -o end33 -j ACCEPT

sudo netfilter-persistent save

############################
# PART 3 ‚Äî FIREWALL (iptables, no ufw)
############################

sudo iptables -F INPUT
sudo iptables -P INPUT DROP
sudo iptables -P OUTPUT ACCEPT

sudo iptables -A INPUT -i lo -j ACCEPT
sudo iptables -A INPUT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT

sudo netfilter-persistent save

############################
# PART 4 ‚Äî SSH KEYS (vm2 -> main)
############################

sudo ip netns exec vm2 mkdir -p /home/ubuntu/.ssh
sudo ip netns exec vm2 ssh-keygen -t ed25519 -f /home/ubuntu/.ssh/id_ed25519 -N ""
sudo ip netns exec vm2 ssh-keyscan 192.168.50.1 >> /home/ubuntu/.ssh/known_hosts

# copy key to main vm
sudo ip netns exec vm2 ssh-copy-id -i /home/ubuntu/.ssh/id_ed25519.pub ubuntu@192.168.50.1

############################
# PART 5 ‚Äî NGINX (service check)
############################

sudo apt install -y nginx
sudo systemctl enable --now nginx

############################
# PART 6 ‚Äî BACKUP VIA RSYNC
############################

sudo mkdir -p /backups/etc
sudo chown ubuntu:ubuntu /backups/etc

sudo ip netns exec vm2 rsync -azhAX -e "ssh -i /home/ubuntu/.ssh/id_ed25519" \
/etc/ ubuntu@192.168.50.1:/backups/etc/

############################
# PART 7 ‚Äî CRON
############################

( sudo crontab -l 2>/dev/null; echo \
'0 2 * * * /usr/bin/rsync -azhAX --delete /etc/ /backups/etc/ >> /var/log/backup-rsync.log 2>&1' ) \
| sudo crontab -

############################
# PART 8 ‚Äî TAR LOG ARCHIVES
############################

sudo mkdir -p /backups/logs
sudo tar -czvf /backups/logs/logs_$(date +%F).tar.gz /var/log

############################
# PART 9 ‚Äî CHECKS
############################

sudo ip netns exec vm2 ping -c 2 8.8.8.8
sudo ss -tulpn | grep -E '22|80'
ls -lh /backups/etc/
ls -lh /backups/logs/
sudo ip netns exec vm2 ssh ubuntu@192.168.50.1 "hostname"


‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** Ubuntu 25.10  
‚úÖ **–°–æ—Å—Ç–æ—è–Ω–∏–µ:** –°—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è  
‚úÖ **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è DevSecOps-–ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è  
‚úÖ **–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Ansible  
